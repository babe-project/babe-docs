<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Michael Franke">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>04 lifecycles hooks - _babe documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/github_extra.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "04 lifecycles hooks";
    var mkdocs_page_input_path = "designing_experiments/04_lifecycles_hooks.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/elixir.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> _babe documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Designing Experiments</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/01_template_views/">Template views</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/03_custom_views/">Custom views</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/04_lifecycles_hooks/">Life cycles and hooks</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/05_canvas/">Canvas</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">server app</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../02_using_the_server_app/01_installation/">Installation</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../02_using_the_server_app/02_use/">Use</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">deploying experiments</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../03_deploying_experiments/01_hosting_on_netlify/">Hosting on netlify</a>
  </li>
        
      </ul>
    </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../04_development/">Development</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../05_about/">About</a>
  </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">_babe documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>04 lifecycles hooks</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/babe-project/babe-docs/edit/master/docs/designing_experiments/04_lifecycles_hooks.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>All trial views have a fixed life cycle that you can use to manipulate the timing of events during a trial. You can insert custom functions, so-called 'hooks' to massage template views into style.</p>
<h5 id="life-cycle">Life cycle</h5>
<p>All the trial views go through 4 steps.</p>
<ol>
<li>
<p>pause step - blank screen</p>
<ul>
<li>enable by passing <code>pause: number (in miliseconds)</code> (will show a pause for after number amount of time)</li>
<li>shows nothing but a blank screen and the <code>QUD</code> if there is such</li>
</ul>
</li>
<li>
<p>fixation point step - a cross in the middle where the stimulus appears</p>
<ul>
<li>passed to the trial view as <code>fix_duration: number (in miliseconds)</code></li>
<li>shows a cross in the middle of the stimulus and the <code>QUD</code> if there is such</li>
</ul>
</li>
<li>
<p>stimulus shown step - stimulus appears</p>
</li>
</ol>
<p>3.5 (optional) stimulus hidden step - hides the stimulus from the screen
    * hide the stimulus after certain amount of time by passing <code>stim_duration: number (in miliseconds)</code> to the view creation
    * hide the stimulus when SPACE gets pressed with <code>stim_duration: 'space'</code>
    * skip this step by not defining <code>stim_duration</code></p>
<ol>
<li>interactions are enabled - the participant can interact with the view (respond, read the sentence etc.)</li>
</ol>
<p>The views you created do not need to use these timeouts, however, each trial view still goes through these steps on the background and you can still <a href="#trial-view-hooks">hook</a> and call locally defined functions</p>
<h5 id="hooks">Hooks</h5>
<p>You can create functions in your local js files and hook these functions to the trial view. To understand how hooks work, first learn about babe's <a href="#trial-views-lifecycle">trial views lifecycle</a></p>
<p><strong>Hooks</strong></p>
<ul>
<li>
<p>after the pause is finished
    enable with <code>hook.after_pause: _function_</code></p>
</li>
<li>
<p>after the fixation point hides
    enable with <code>hook.after_fix_point: _function_</code></p>
</li>
<li>
<p>after the stimulus is shown
    enable with <code>hook.after_stim_shown: _function_</code></p>
</li>
<li>
<p>after the stimulus hides
    enable with <code>hook.after_stim_hidden: _function_</code></p>
</li>
<li>
<p>after the interactions are enabled
    enable with <code>hook.after_response_enabled: _function_</code></p>
</li>
</ul>
<p>Your custom functions get the trial <code>data</code> for each trial view and <code>next</code> as arguments. You can use the <code>data</code> if you need to. To proceed to the next step of the lifecycle, you have to call <code>next()</code></p>
<p><strong>Full lifecycle - hook sample</strong></p>
<ol>
<li>pause shows</li>
<li>pause finishes</li>
<li>after_pause function called</li>
<li>fixation point shows</li>
<li>fixation point disappears</li>
<li>after_fix_point function called</li>
<li>stimulus shows</li>
<li>after_stim_shown function called</li>
<li>stimlus hides</li>
<li>after_stim_hidden function called</li>
<li>response is enabled</li>
<li>after_response_enabled function called</li>
</ol>
<p><strong>Real example</strong></p>
<p>Imagine you want to tell the participants whether their repsonse was correct while they are getting familiar with the experiment, for example in the practice trial view. To do that you need to get the answer they chose and check it for correctness. You can define a funciton that gets their response and hook to the trial view after the response is enabled. In the example below, assume that <code>option1</code> is always the correct answer.</p>
<pre><code>// compares the chosen answer to the value of `option1`
function checkResponse(data, next) {
    $('input[name=answer]').on('change', function(e) {
        if (e.target.value === data.option1) {
            alert('Your answer is correct! Yey!');
        } else {
            alert('Sorry, this answer is incorrect :(');
        }
        next();
    })
}
</code></pre>

<p>and add a <code>after_response_enabled</code> hook to the view:</p>
<pre><code>const practice = babeViews.forcedChoice({
    trials: 20,
    name: 'practice',
    trial_type: 'practice',
    data: practice_trials.forcedChoice,
    fix_duration: 500,
    pause: 500,
    hook: {
        after_response_enabled: checkResponse
    }
});
</code></pre>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>MIT license</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/babe-project/babe-docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
