<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Michael Franke">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Recruitment via MTurk - _magpie documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/github_extra.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Recruitment via MTurk";
    var mkdocs_page_input_path = "03_deploying_experiments/02_recruitment_MTurk.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/elixir.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> _magpie documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Designing Experiments</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/01_template_views/">Template views</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/03_custom_views/">Custom views</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/04_lifecycles_hooks/">Life cycles and hooks</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/05_canvas/">Canvas</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/05_mousetracking/">Mouse tracking</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../01_designing_experiments/06_progress_bars/">Progress bars</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">server app</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../02_using_the_server_app/01_installation/">Installation</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../02_using_the_server_app/02_use/">Use</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">deploying experiments</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../01_configuration/">Deploy configuration</a>
  </li>
        
          


  
    
    <li class="navtree toctree-l2 page current">
      <a class="current" href="./">
        Recruitment via MTurk
          <span class="toctree-expand"></span>
      </a>
    </li>
    
      




  
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../03_recruitment_Prolific/">Recruitment via Prolific</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../04_hosting_on_netlify/">Hosting on netlify</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Misc</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../04_development/">Development</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../05_about/">About</a>
  </li>
        
      </ul>
    </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">_magpie documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>deploying experiments &raquo;</li>
        
      
    
    <li>Recruitment via MTurk</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/magpie-ea/magpie-docs/edit/master/docs/03_deploying_experiments/02_recruitment_MTurk.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h5 id="recruitment-via-mturk">Recruitment via MTurk</h5>
<p>You can post a _magpie experiment as an external HIT on MTurk. If you are familiar with posting external HITs, the only thing that you need to take into account is that _magpie experiments send their collected data to the _magpie backend. So, in order to collect the data from your experiment, you would visit the _magpie backend to download a CSV file. No need to go via MTurk.</p>
<p>If you are not familiar with posting external HITs on MTurk, here is a simple method that uses <code>boto3</code>, which is a Python SDK for Amazon's Web Services (AWS). The <a href="https://github.com/magpie-ea/MTurkDeployTemplate">MTurkDeployTemplate</a> gives a full example of an experiment that uses this method.</p>
<p>The method we propose here is easy in the sense that it might require less downloading / installing than other methods. You only need Python and the <code>boto3</code> package. (But <a href="https://github.com/Ciyang/experiment_template">here</a> and <a href="https://cocolab.stanford.edu/mturk-tools.html">there</a> are fully viable alternative methods and resources that provide additional useful information.)</p>
<p>We assume that you have an MTurk account and that you have your AWS credentials ready at hand. (If not, see <a href="https://github.com/Ciyang/experiment_template">here</a> for instructions on how to setup your account.) Download a recent version of Python (we used 3.6 at the time of writing) and install the <code>boto3</code> package, e.g., using <code>pip</code>. Next, in your homedirectory, create the file:</p>
<pre><code>~/.aws/config
</code></pre>
<p>Fill this file with the following content, so that <code>boto3</code> knows about your AWS credentials (never post this, host this or share this):</p>
<pre><code>
[default]
aws_access_key_id=YOUR_ACCESS_KEY_ID
aws_secret_access_key=YOUR_SECRET_ACCESS_KEY

</code></pre>
<p>Make sure that your _magpie experiment is ready for MTurk deployment:</p>
<ul>
<li>set the deployment method to <code>MTurk</code></li>
<li>host the experiment on a web server, e.g., <a href="/03_deploying_experiments/02_hosting_on_netlify/">using Netlify</a></li>
<li>make sure you have the URL for your web-version of the experiment ready</li>
</ul>
<p>Save the following code in a file called <code>create_HIT.py</code>, after inserting the correct URL to your experiment and commenting in/out the relevant lines depending on whether you want a real live experiment or a test version in the sandbox.</p>
<pre><code class="language-python">import boto3

MTURK_SANDBOX = 'https://mturk-requester-sandbox.us-east-1.amazonaws.com'

mturk = boto3.client('mturk',
   region_name='us-east-1'
#   endpoint_url = MTURK_SANDBOX # include this for sandbox mode
)

your_url = &quot;https://YOUR_URL&quot; # insert your URL

external_question = &quot;&quot;&quot;&lt;ExternalQuestion xmlns='http://mechanicalturk.amazonaws.com/AWSMechanicalTurkDataSchemas/2006-07-14/ExternalQuestion.xsd'&gt;
  &lt;ExternalURL&gt;&quot;&quot;&quot; + your_url + &quot;&quot;&quot;&lt;/ExternalURL&gt;
  &lt;FrameHeight&gt;600&lt;/FrameHeight&gt;
&lt;/ExternalQuestion&gt;&quot;&quot;&quot;

new_hit = mturk.create_hit(
    Title = 'Your title',
    Description = 'Your description',
    Keywords = 'some keywords',
    Reward = '0.5', # how much to pay
    MaxAssignments = 1, # how many participants
    LifetimeInSeconds = 172800, 
    AssignmentDurationInSeconds = 600,
    AutoApprovalDelayInSeconds = 14400,
    Question = external_question,
)

print(&quot;A new HIT has been created. You can preview it here:&quot;)
#print(&quot;https://workersandbox.mturk.com/mturk/preview?groupId=&quot; + new_hit['HIT']['HITGroupId']) # comment in for sandbox mode
print(&quot;https://worker.mturk.com/mturk/preview?groupId=&quot; + new_hit['HIT']['HITGroupId']) # use this otherwise
print(&quot;HITID = &quot; + new_hit['HIT']['HITId'] + &quot; (for your reference)&quot;)
</code></pre>
<p>Now execute <code>python create_HIT.py</code>. Make sure you note the HITid that this call returns, because you need it to further identify this experimental run when interacting with MTurk. Download file <code>get_HIT_status.py</code> <a href="https://github.com/magpie-ea/MTurkDeployTemplate/blob/master/get_HIT_status.py">here</a> and use <code>python get_HIT_status.py YOUR_HIT_ID</code>, where <code>YOUR_HIT_ID</code> is the HITid returned when you posted the HIT, to learn how many workers have completed your work. Download file <code>approve_HIT.py</code> <a href="https://github.com/magpie-ea/MTurkDeployTemplate/blob/master/approve_HIT.py">here</a> and use <code>python approve_HIT.py YOUR_HIT_ID</code> to reimburse all workers. You can manipulate (expire, extend, ...) your HIT using <code>boto3</code> as described in the  <a href="http://boto3.readthedocs.io/en/latest/index.html">boto3 documentation</a>. For some recurrent manipulations, you can also use <a href="https://manage-hits-individually.s3.amazonaws.com/v4.0/index.html">this web interface</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../03_recruitment_Prolific/" class="btn btn-neutral float-right" title="Recruitment via Prolific">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../01_configuration/" class="btn btn-neutral" title="Deploy configuration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>MIT license</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/magpie-ea/magpie-docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../01_configuration/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../03_recruitment_Prolific/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
